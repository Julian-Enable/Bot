name: Daily commit to keep contributions green

on:
  schedule:
    # 15 executions per day, each making 2-3 commits = 30-45 commits daily
    - cron: '10 0 * * *'   # 00:10 UTC
    - cron: '35 1 * * *'   # 01:35 UTC
    - cron: '15 3 * * *'   # 03:15 UTC
    - cron: '50 4 * * *'   # 04:50 UTC
    - cron: '25 6 * * *'   # 06:25 UTC
    - cron: '5 8 * * *'    # 08:05 UTC
    - cron: '40 9 * * *'   # 09:40 UTC
    - cron: '20 11 * * *'  # 11:20 UTC
    - cron: '55 12 * * *'  # 12:55 UTC
    - cron: '30 14 * * *'  # 14:30 UTC
    - cron: '10 16 * * *'  # 16:10 UTC
    - cron: '45 17 * * *'  # 17:45 UTC
    - cron: '20 19 * * *'  # 19:20 UTC
    - cron: '0 21 * * *'   # 21:00 UTC
    - cron: '40 22 * * *'  # 22:40 UTC
  workflow_dispatch: {}

jobs:
  daily:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          ref: master  # Always use code from master branch
          persist-credentials: false # we'll use a PAT to push

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.x'

      - name: Run daily commit script
        env:
          PAT: ${{ secrets.PAT }}
          COMMIT_NAME: ${{ secrets.COMMIT_NAME }}
          COMMIT_EMAIL: ${{ secrets.COMMIT_EMAIL }}
          GITHUB_REPOSITORY: ${{ github.repository }}
          GITHUB_REF: ${{ github.ref }}
        run: |
          python scripts/daily_commit.py
